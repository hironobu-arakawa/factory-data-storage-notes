# 保存しないと判断してよい条件

このドキュメントは、  
「保存は意思決定である」と理解した上で、  
**あえて保存しない判断を正当化するため**のものです。

保存しないことは、逃げではありません。  
**設計上の選択肢の一つ**です。

---

## 条件①  
### 意味がまだ揺れている

次のような状態のデータは、保存してはいけません。

- 定義が議論中
- 設備・運用で解釈が分かれている
- 将来ルールが変わる前提で見ている

保存すると：

- 現在の仮解釈が「事実」になる
- 将来の修正が例外扱いになる
- 誰も責任を取らなくなる

**意味が固まっていないデータは、Factではありません。**

---

## 条件②  
### 上流から再生成できる

次の条件を満たす場合、保存は必須ではありません。

- 上流に raw が残っている
- 同じ結果を再計算できる
- 再生成コストが許容範囲

この場合の保存は：

- 利便性のための複製
- 正本を増やす行為

になります。

**再生成できるものは、保存を遅らせてよい。**

---

## 条件③  
### 品質状態が確定していない

以下が未確定なままのデータ：

- 正常 / 異常 / 補正
- 欠損の扱い
- センサ起因か人為起因か

これを保存すると：

- 下流は「正常」と仮定する
- 補正履歴が消える
- 異常の責任が不明になる

品質が未確定なデータは、  
**保存せず保留**するか、  
**raw として隔離**すべきです。

---

## 条件④  
### 利用目的が「今だけ」

次のような用途は、保存理由になりません。

- 一時的な可視化
- デバッグ
- 期間限定の検証
- 会議用の確認

これらは：

- キャッシュ
- 一時テーブル
- ephemeral なストレージ

で十分です。

**「今使う」と「将来に残す」は別判断**です。

---

## 条件⑤  
### 保存責任者が決まっていない

次の問いに即答できますか？

- このデータが間違っていたら誰が直す？
- どこまでが保証範囲？
- いつまで責任を持つ？

答えられない場合：

- 保存してはいけません
- DB に入れてはいけません

**責任が置けないデータは、保存できません。**

---

## 条件⑥  
### 配布用の形になっている

次の形のデータは、保存対象ではありません。

- wide テーブル
- 集計済み KPI
- snapshot
- レポート用指標

これらは：

- 投影
- 配布物
- serving 用

です。

**配布のための形を正本として保存してはいけません。**

---

## 条件⑦  
### 「とりあえず集めたい」という衝動

この理由が出たら、黄色信号です。

- 要件が固まっていない
- 後から考えようとしている
- 判断を先送りしている

保存は、判断の先送りではありません。

**判断できないときは、保存しない。**

---

## まとめ（判断フレーズ）

- これは Fact か？
- 意味は固定してよいか？
- 責任は誰にあるか？
- 再生成できないか？
- 本当に将来に残す必要があるか？

一つでも即答できなければ、  
**保存しない判断が正解**です。

---

保存しないことは、  
将来の選択肢を残すことです。

このリポジトリは、  
その判断を後押しするために存在します。
